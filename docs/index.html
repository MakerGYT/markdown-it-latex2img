<!DOCTYPE html>

<head>
  <title>Math API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/latest/github-markdown.css" />
  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }

    @media (max-width: 767px) {
      .markdown-body {
        padding: 15px;
      }

      #input {
        width: 100%;
      }
    }

    .main {
      max-width: 800px;
      margin: 0 auto 80px auto;
    }

    #input {
      min-height: 34px;
      padding: 7px 8px;
      font-size: 13px;
      color: #333;
      vertical-align: middle;
      background-color: #fff;
      background-repeat: no-repeat;
      background-position: right 8px center;
      border: 1px solid #ccc;
      border-radius: 3px;
      outline: none;
      box-shadow: inset 0 1px 2px rgba(0,0,0,.075);
    }

    button {
      display: inline-block;
      margin-top: 1em;
      width: 120px;
      height: 50px;
      font-size: 14pt;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc,#eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
    }
  </style>
</head>

<body>
  <div class="main">
    <h2>Markdown-it-latex2img示例</h2>
    <p>
      <a href="https://npmjs.com/package/markdown-it-latex2img"><img src="https://img.shields.io/npm/v/markdown-it-latex2img.svg?style=flat" alt="NPM version"></a>
      <a href="https://github.com/MakerGYT/markdown-it-latex2img"><img src="https://img.shields.io/github/stars/MakerGYT/markdown-it-latex2img?style=social" alt="Github stars"></a>
    </p>      
    <textarea id="input" type="textarea" rows=15, cols=80 spellcheck="false">
## 0 用法
```js
var md = window.markdownit();
md.use(window.markdownitLatex2img, 
  {style: "filter: opacity(75%);transform:scale(0.75);text-align:center;"} //可选
);
md.render(input.value);
```
## 1 数学公式
### 1.1 内联公式
**开头的`$`必须在其右边紧跟一个非空格字符，而结尾的`$`必须在其左边紧接一个非空格字符，并且不能紧跟一个数字。**
- 勾股定理: $a^2+b^2=c^2$
- 等差数列求和公式: $S_{n}=n a_{1}+\frac{n(n-1)}{2} d, n \in N^{*}$
- 牛顿-莱布尼茨公式: $\int_{a}^{b} f(x) d x=F(b)-F(a)=\left.F(x)\right|_{a} ^{b}$
- 二项分布: $P_{n}(k)=C_{n}^{k} p^{k} q^{n-k} \quad k=0,1,2 \ldots \ldots, n$
### 1.2 块公式
正态分布$X \sim N(\mu,\sigma^2)$: 
$$f(x) = \frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2}}$$

斐波那契数列$A_n=A_{n-1}+A_{n-2}$,前后两项的比值逐渐收敛到黄金分割比例
$$\lim_{n\to \infty}\frac{A_{n-1}}{A_n}=\frac{\sqrt{5}-1}{2}.$$

因式分解
$$\begin{split}(x−1)(x−3)&=x^2−4x+3 \\ 
&=x^2−4x+4−1 \\ 
&=(x−2)^2−1
\end{split}
$$

狄利克雷函数

$$
D(x)=
\begin{cases}
1,& x \in Q \\
0,& x \notin Q
\end{cases}
$$

高斯公式
$$
\iiint_{\Omega}\left(\frac{\partial P}{\partial x}+\frac{\partial Q}{\partial y}+\frac{\partial R}{\partial z}\right) d v=\iint_{\Sigma} P d y d z+Q d z d x+R d x d y
$$

范德蒙行列式
$$D_{n-1}=\left|\begin{array}{cccc}
1 & 1 & \dots & 1 \\
x_{2} & x_{3} & \dots & x_{n} \\
\vdots & \vdots & & \vdots \\
x_{2}^{n-2} & x_{3}^{n-2} & \dots & x_{n}^{n-2}
\end{array}\right|=\prod_{2 \leq j<i \leq n}\left(x_{i}-x_{j}\right)$$

线性方程组
$$\left\{\begin{aligned}
a_{11} x_{1}+a_{12} x_{2}+\cdots+a_{1 n} x_{n} &=b_{1} \\
a_{21} x_{1}+a_{22} x_{2}+\cdots+a_{2 n} x_{n} &=b_{2} \\
\cdots \cdots \cdots \\
a_{m 1} x_{1}+a_{m 2} x_{2}+\cdots+a_{m n} x_{n} &=b_{m}
\end{aligned}\right.$$

## 2 物理公式
- 牛顿第一定律: $\sum \vec{F}_{i}=\frac{\mathrm{d} \vec{v}}{\mathrm{d} t}=0$
- 牛顿第二定律: $\vec{F}=\frac{\mathrm{d} m}{\mathrm{d} t} \vec{v}+m \frac{\mathrm{d} \vec{v}}{\mathrm{d} t}=\frac{\mathrm{d} m}{\mathrm{d} t} \vec{v}+m \vec{a}=\frac{\mathrm{d} m}{\mathrm{d} t} \vec{v}+m \frac{\mathrm{d}^{2} \vec{r}}{\mathrm{d} t^{2}}$
- 牛顿第三定律: $\overrightarrow{F_{12}}=-\overrightarrow{F_{21}}$
- 质能守恒: $E=mc^2$

万有引力定律: $F=\frac{G M m}{r^{2}}$
$$G \frac{m M}{(r+h)^{2}}=m \frac{\nu^{2}}{(r+h)}$$
基尔霍夫定律
$$\left[\frac{\partial\left(\Delta_{r} H_{m}\right)}{\partial T}\right]_{p}=\sum_{B} v_{B} C_{p, m}(B)$$
热力学第二定律
$$d S \geq \frac{\delta Q}{T}$$
## 3 化学公式
离子反应与沉淀: $\ce{SO4^2- + Ba^2+ -> BaSO4 v}$

氮气氢气合成氨
$$
\ce{N2 + 3H2 <=>T[高温、加压][催化剂] 2NH3}
$$

化学平衡常数:$\mathrm{Zn}+2 \mathrm{HCl}(\mathrm{aq})=\mathrm{H}_{2}+\mathrm{ZnCl}_{2} \quad(\mathrm{aq})$
$$K^{\theta}=\frac{\left[p\left(\mathrm{H}_{2}\right) / p^{\theta}\right]\left[c\left(\mathrm{ZnCl}_{2}\right)\right]}{c^{2}(\mathrm{HC})}$$

## 4 生物公式
光合作用
$$\ce{{CO}_{2} + 2{H}_{2}{O} ->T[光、叶绿体][酶] ({CH}_{2}O) + {H}_{2}{O} + {O}_{2}}$$

## 5 语法参考
[MathJax basic tutorial and quick reference](https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference)

<div style="text-align:right;">
  <p>
    更新日期: 2020年6月1日
  </p>
  <p >
    © MakerGYT 2020
  </p>
</div>
    </textarea>
    <form>
      <input type="checkbox" id="parse">Parse html string
    </form>
    <div>
      <button id="render">Render</button>
      <button class="btn">
        Copy
      </button>
      <span id="result"></span>
    </div>

    <article id="output" class="markdown-body"></article>
  </div>
  <script src="../dist/markdown-it-latex2img.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/markdown-it-latex2img@0.0.5/dist/markdown-it-latex2img.min.js"
    crossorigin="anonymous"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@11.0.0/dist/markdown-it.min.js" crossorigin="anonymous"></script>
  
  <script>
    var input = document.getElementById("input"),
      output = document.getElementById("output"),
      render = document.getElementById("render");

    render.addEventListener("click", () => {
      var md = window.markdownit({
        html: document.getElementById("parse").checked
      });
      md.use(window.markdownitLatex2img, { style: "filter: opacity(75%);transform:scale(0.75);text-align:center" });

      var result = md.render(input.value);
      output.innerHTML = result;
      console.log(result);
    });

    var clipboard = new ClipboardJS('.btn', {
      text: function (trigger) {
        return output.innerHTML;
      }
    });
    clipboard.on('success', function (e) {
      document.getElementById("result").innerText = 'Copied'
    });
    clipboard.on('error', function (e) {
      document.getElementById("result").innerText = 'Please open console to copy';
    });
  </script>
</body>
